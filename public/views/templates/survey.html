<div id="survey" layout="row" layout-align="center center" class="container">
  <md-card flex>
    <md-card-content ng-hide="survey.loading">
      <div layout="row" layout-sm="column" layout-align="space-around">
        <md-progress-circular md-mode="indeterminate"></md-progress-circular>
      </div>
    </md-card-content>
    <md-card-content ng-show="survey.loading">
      <div class="survey-header" layout="row">
        <div class="client-info" layout="column" layout-align="center left">
          <div class="client-name" layout="row" layout-align="center left">
            <h1><i>{{survey.surveyDetails[0].client_name}}</i></h1>
          </div>
          <div layout="row" layout-align="center left">
            <ul class="client-address">
              <li>{{survey.surveyDetails[0].billing_address_street}}</li>
              <li>&nbsp• {{survey.surveyDetails[0].billing_address_city}},  {{survey.surveyDetails[0].billing_address_state}} •&nbsp</li>
              <li>{{survey.surveyDetails[0].billing_address_zip}}</li>
          </div>

          <div layout="row" layout-align="center left">
            <div class="client-contact" layout="column">
              <ul>
                <li><b>Primary Contact</b></li>
                <li>{{survey.surveyDetails[0].primary_contact_name}}</li>
                <li>{{survey.surveyDetails[0].primary_contact_phone_number}}</li>
                <li>{{survey.surveyDetails[0].primary_contact_email}}</li>
              </ul>
            </div>
            <div class="client-contact" layout="column">
              <ul ng-show="survey.surveyDetails[0].alt_contact_name.length">
                <li><b>Alternate Contact</b></li>
                <li>{{survey.surveyDetails[0].alt_contact_name}}</li>
                <li>{{survey.surveyDetails[0].alt_phone_number}}</li>
                <li>{{survey.surveyDetails[0].alt_contact_email}}</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="job-number" layout="column" layout-align="center right">
          <h1><i>Job# {{survey.surveyDetails[0].job_number}}</i></h1>
            <ul>
              <li><b>Completion Date:</b></li>
              <li>{{survey.surveyDetails[0].completion_date}}</li>
              <li><b>Survey Date:</b></li>
              <li>{{survey.surveyDetails[0].survey_date}}</li>
            </ul>
        </div>
      </div>
    </md-card-content>
  </md-card>
</div>
<div class="survey-area" layout="row" layout-align="center center" ng-repeat="area in survey.areaArray track by $index">
  <md-card flex>
    <md-card-content>
      <h3 class="areaName" ng-if="area[0].area_name">Area: {{area[0].area_name}}</h4>
      <table cellspacing="0">
        <thead>
          <tr id="headerRow">
            <th>Floor</th>
            <th>Room</th>
            <th>Quantity</th>
            <th>Width</th>
            <th>Length</th>
            <th>IB/OB</th>
            <th>Controls</th>
            <th>Fascia Size</th>
            <th>Fabric</th>
            <th>Mount</th>
          </tr>
        </thead>
        <tbody>
          <tr class="tableBodyRow" ng-repeat="measurements in area">
            <td>{{measurements.floor}}</td>
            <td>{{measurements.room}}</td>
            <td>{{measurements.quantity}}</td>
            <td>{{measurements.width | number : 2}}</td>
            <td>{{measurements.length | number : 2}}</td>
            <td>{{measurements.ib_ob}}</td>
            <td>{{measurements.controls}}</td>
            <td>{{measurements.fascia_size}}</td>
            <td>{{measurements.fabric}}</td>
            <td>{{measurements.mount}}</td>
          </tr>
        </tbody>
      </table>
      <p class="notes">
        <b>Notes:</b>
        {{area[$index].notes}}
      </p>
      <div class="fileInfo">
        <ul class="notes" ng-init="areaId = area[0].area_id">
          <li class="unbulleted"><b>Files:</b></li>
          <li ng-repeat="file in survey.currentFilesObject track by $index" ng-if="file.areaId == areaId" class="unbulleted"><b>{{file.originalName}}</b>
            <ul>
              <li class="unbulleted">
                <i>"{{file.fileInfo}}"</i>
              </li>
            </ul>
            <md-button ng-click="survey.showPreview($event, $index)">
              <span>Preview</span>
              <div class="md-ripple-container"></div>
            </md-button>
            <md-switch class="md-primary" md-no-ink aria-label="Switch No Ink" ng-model="survey.currentFilesObject['file_' + ($index +1)].print">
              Include {{survey.currentFilesObject['file_' + ($index +1)].print}}
            </md-switch>
          </li>
        </ul>
      </div>
    </md-card-content>
  </md-card>
</div>
<div class="filePrint" ng-repeat="file in survey.currentFilesObject" ng-init="fileUrl = 'https://s3.amazonaws.com/american-drapery-systems/survey_' + survey.surveyId + '/area_' + file.areaId + '/' + file.key + file.originalName" ng-if="file.print == true">
  <img ng-src="{{fileUrl}}" alt="file"/>
</div>
<div id="surveyButtons" layout="row" layout-align="center start">
  <md-button class="md-raised md-button md-ink-ripple" ng-click="survey.printPage()">PDF/PRINT</md-button>

  <md-button class="md-raised md-button md-ink-ripple" ng-show="survey.areaArray.length > 4" ng-click="survey.goToTop()">Go To Top</md-button>
</div>
